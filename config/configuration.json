{
  "k_atr": 0.20,
  "min_breakout_atr_mult": 0.3,
  "hold_bars": 1,
  "vol_z_required": 0.8,
  "width_window": 40,
  "expansion_ratio": 1.3,
  "expiry_size_multiplier": 0.7,
  "expiry_allow_breakout": false,
  "expiry_allow_fade": true,
  "regime_scores": {
    "squeeze": 0.6,
    "trend": 0.8,
    "chop": 0.5
  },
  "regime_allowed_setups": {
    "trend_up": [
      "breakout_long",
      "failure_fade_short",
      "flag_continuation_long",
      "trend_pullback_long",
      "orb_breakout_long",
      "support_bounce_long",
      "gap_fill_long",
      "momentum_breakout_long",
      "trend_continuation_long"
    ],
    "trend_down": [
      "breakout_short",
      "failure_fade_long",
      "flag_continuation_short",
      "trend_pullback_short",
      "orb_breakout_short",
      "resistance_bounce_short",
      "gap_fill_short",
      "momentum_breakout_short",
      "trend_continuation_short"
    ],
    "chop": [
      "failure_fade_long",
      "failure_fade_short",
      "vwap_mean_reversion_long",
      "vwap_mean_reversion_short",
      "range_rejection_long",
      "range_rejection_short",
      "volume_spike_reversal_long",
      "volume_spike_reversal_short",
      "momentum_breakout_long",
      "momentum_breakout_short"
    ],
    "squeeze": [
      "squeeze_release_long",
      "squeeze_release_short",
      "orb_breakout_long",
      "orb_breakout_short"
    ]
  },
  "regime_thresholds": {
    "vwap_min_strength": 2.0,
    "vwap_min_adx": 8.0,
    "vwap_min_vol_mult": 1.05,
    "bo_min_adx": 12.0,
    "bo_min_vol_mult": 1.15,
    "ff_min_vol_mult": 0.90
  },
  "liquidity_gates": {
    "_comment": "Market Cap Segmentation - Priority 1: Liquidity Filters (evidence-based thresholds)",
    "enabled": true,
    "exclude_micro_caps": false,
    "_rationale_micro_caps": "ENABLED per 3-month baseline analysis: micro-caps generated 84% of profits (Rs.5,550 out of Rs.6,617). failure_fade strategy excels in volatile, illiquid names.",
    "large_cap": {
      "min_mcap_cr": 20000,
      "min_avg_volume_daily": 100000,
      "min_value_traded_cr_daily": 1.0,
      "volume_surge_min": 1.3,
      "_rationale": "Liquid names - lower volume requirements due to deep order books"
    },
    "mid_cap": {
      "min_mcap_cr": 5000,
      "max_mcap_cr": 20000,
      "min_avg_volume_daily": 250000,
      "min_value_traded_cr_daily": 0.5,
      "volume_surge_min": 2.0,
      "_rationale": "Need 2x volume confirmation vs large-cap to avoid manipulation"
    },
    "small_cap": {
      "min_mcap_cr": 500,
      "max_mcap_cr": 5000,
      "min_avg_volume_daily": 500000,
      "min_value_traded_cr_daily": 0.3,
      "volume_surge_min": 3.0,
      "max_bid_ask_spread_bps": 20,
      "_rationale": "Strict filters - 3x volume surge required to avoid false breakouts (institutional standard)"
    },
    "micro_cap": {
      "min_mcap_cr": 50,
      "max_mcap_cr": 500,
      "min_avg_volume_daily": 750000,
      "min_value_traded_cr_daily": 0.2,
      "volume_surge_min": 4.0,
      "max_bid_ask_spread_bps": 40,
      "_rationale": "STRICTEST filters - 4x volume surge (vs 3x small-caps) to ensure tradeable liquidity. Baseline data: 43.8% WR, 1.63 PF, Rs.173/trade avg."
    }
  },
  "cap_strategy_preferences": {
    "_comment": "Market Cap Segmentation - Priority 2: Strategy-Cap Mapping (institutional evidence)",
    "enabled": true,
    "large_cap": {
      "preferred": [
        "vwap_mean_reversion_long",
        "vwap_mean_reversion_short",
        "failure_fade_long",
        "failure_fade_short",
        "range_rejection_long",
        "range_rejection_short"
      ],
      "allowed": [
        "breakout_long",
        "breakout_short",
        "trend_pullback_long",
        "trend_pullback_short",
        "gap_fill_long",
        "gap_fill_short",
        "orb_breakout_long",
        "orb_breakout_short"
      ],
      "blocked": [
        "momentum_breakout_long",
        "momentum_breakout_short"
      ],
      "_rationale": "Large-caps mean-revert reliably (70% WR), move slowly on momentum. Institutional HFT keeps prices efficient."
    },
    "mid_cap": {
      "preferred": [
        "orb_breakout_long",
        "orb_breakout_short",
        "flag_continuation_long",
        "flag_continuation_short",
        "trend_pullback_long",
        "trend_pullback_short"
      ],
      "allowed": [
        "gap_fill_long",
        "gap_fill_short",
        "vwap_reclaim_long",
        "vwap_lose_short",
        "breakout_long",
        "breakout_short",
        "vwap_mean_reversion_long",
        "vwap_mean_reversion_short",
        "failure_fade_long",
        "failure_fade_short"
      ],
      "blocked": [],
      "_rationale": "Mid-caps: best balance of momentum + structure. All strategies viable."
    },
    "small_cap": {
      "preferred": [
        "momentum_breakout_long",
        "momentum_breakout_short",
        "orb_breakout_long",
        "orb_breakout_short",
        "squeeze_release_long",
        "squeeze_release_short"
      ],
      "allowed": [
        "gap_fill_long",
        "gap_fill_short",
        "breakout_long",
        "breakout_short",
        "flag_continuation_long",
        "flag_continuation_short"
      ],
      "blocked": [
        "vwap_mean_reversion_long",
        "vwap_mean_reversion_short",
        "failure_fade_long",
        "failure_fade_short"
      ],
      "_rationale": "Small-caps momentum-driven (2-3x faster moves). Mean-reversion unreliable due to low liquidity + manipulation risk."
    },
    "micro_cap": {
      "preferred": [
        "failure_fade_long",
        "failure_fade_short",
        "volume_spike_reversal_long",
        "volume_spike_reversal_short"
      ],
      "allowed": [
        "orb_breakout_long",
        "orb_breakout_short",
        "squeeze_release_long",
        "squeeze_release_short",
        "momentum_breakout_long",
        "momentum_breakout_short"
      ],
      "blocked": [
        "vwap_mean_reversion_long",
        "vwap_mean_reversion_short",
        "trend_pullback_long",
        "trend_pullback_short",
        "range_rejection_long",
        "range_rejection_short"
      ],
      "_rationale": "BASELINE PROVEN: 43.8% WR, 1.63 PF, Rs.173/trade (best segment!). failure_fade strategy DOMINATES micro-caps due to high volatility + retail-driven failed breakouts. Avoid range/pullback strategies (too choppy)."
    }
  },
  "cap_risk_adjustments": {
    "_comment": "Market Cap Segmentation - Priority 3: Risk Sizing by Cap (Van Tharp evidence)",
    "enabled": true,
    "large_cap": {
      "size_multiplier": 1.2,
      "max_position_pct": 5.0,
      "sl_atr_multiplier": 1.0,
      "_rationale": "Lower volatility allows larger size (Van Tharp: 90% of performance from sizing)"
    },
    "mid_cap": {
      "size_multiplier": 1.0,
      "max_position_pct": 3.0,
      "sl_atr_multiplier": 1.1,
      "_rationale": "Baseline sizing - balanced risk"
    },
    "small_cap": {
      "size_multiplier": 0.6,
      "max_position_pct": 2.0,
      "sl_atr_multiplier": 1.3,
      "_rationale": "Higher volatility requires smaller size + wider stops (30% wider to avoid noise)"
    },
    "micro_cap": {
      "size_multiplier": 0.5,
      "max_position_pct": 1.5,
      "sl_atr_multiplier": 1.5,
      "_rationale": "ENABLED per baseline data: Best performing segment (43.8% WR, 1.63 PF, Rs.173/trade avg). 50% position size (vs 60% small-caps) + 50% wider stops due to higher volatility. Strict liquidity filters (4x volume surge) ensure tradeable names only."
    }
  },
  "regime_cap_allocation": {
    "_comment": "Market Cap Segmentation - Priority 4: Regime-Cap Interaction (institutional rotation + baseline data)",
    "enabled": true,
    "chop": {
      "large_cap_weight": 0.50,
      "mid_cap_weight": 0.15,
      "small_cap_weight": 0.10,
      "micro_cap_weight": 0.25,
      "_rationale": "CHOP → Large-caps + micro-caps excel (mean-reversion edge). Micro-caps 25% weight due to BASELINE: 43.8% WR, 1.63 PF with failure_fade strategy in chop conditions."
    },
    "trend_up": {
      "large_cap_weight": 0.15,
      "mid_cap_weight": 0.45,
      "small_cap_weight": 0.25,
      "micro_cap_weight": 0.15,
      "_rationale": "TREND_UP → Mid/Small-caps lead momentum. Micro-caps 15% (moderate allocation, prefer liquidity in trends)."
    },
    "trend_down": {
      "large_cap_weight": 0.50,
      "mid_cap_weight": 0.25,
      "small_cap_weight": 0.15,
      "micro_cap_weight": 0.10,
      "_rationale": "TREND_DOWN → Flight to quality, minimize micro-cap exposure. Micro-caps 10% (lowest allocation due to crash risk)."
    },
    "squeeze": {
      "large_cap_weight": 0.35,
      "mid_cap_weight": 0.30,
      "small_cap_weight": 0.20,
      "micro_cap_weight": 0.15,
      "_rationale": "SQUEEZE → Balanced allocation awaiting breakout direction. Micro-caps 15% (moderate, can explode either way)."
    },
    "_institutional_evidence": "Linda Raschke: market cap rotation patterns follow regime shifts. CTAs rotate from large→mid→small during trend, reverse during chop.",
    "_baseline_evidence": "3-month baseline: micro-caps generated 84% of profits (Rs.5,550 / Rs.6,617 total). failure_fade strategy dominates micro-caps in CHOP conditions."
  },
  "decision_require_structure_event": true,
  "news_min_hold_bars": 2,
  "bar_1m_freq": "1min",
  "bar_5m_freq": "5min",
  "bar_5m_span_minutes": 5,
  "ws_subscribe_batch_ms": 1500,
  "ws_max_batch_size": 100,
  "ws_flush_thread_enabled": true,
  "ws_flush_interval_ms": 500,
  "ws_max_retries": 5,
  "ws_reconnect_backoff_secs": 2,
  "submgr_debounce_ms": 1500,
  "router_timestamp_fields": [
    "timestamp",
    "exchange_timestamp",
    "last_trade_time",
    "ts"
  ],
  "router_symbol_fields": [
    "symbol",
    "tradingsymbol"
  ],
  "router_price_fields": [
    "ltp",
    "price",
    "last_price"
  ],
  "router_tradeqty_fields": [
    "last_trade_qty",
    "qty"
  ],
  "router_dayvolume_fields": [
    "volume",
    "total_volume_traded"
  ],
  "router_default_timezone": "Asia/Kolkata",
  "router_assume_epoch_utc": true,
  "order_max_per_sec": 8,
  "order_max_per_min": 180,
  "order_max_per_day": 3000,
  "order_loop_idle_ms": 10,
  "order_retry_delay_ms": 50,
  "order_exception_delay_ms": 100,
  "scan_min_bars_5m": 30,
  "scan_ret1_min": 0.002,
  "scan_ret3_min": 0.004,
  "scan_ret5_min": 0.006,
  "scan_vol_z_window": 20,
  "scan_vol_z_min": 0.5,
  "scan_vwap_dist_bps_max": 80,
  "scan_output_max_rows": 50,
  "session_open_hhmm": "0915",
  "session_close_hhmm": "1530",
  "orb_minutes": 15,
  "planner_atr_period": 14,
  "planner_choppiness_lookback": 30,
  "planner_choppiness_high": 61.8,
  "planner_choppiness_low": 38.2,
  "planner_max_gap_pct_for_trend": 3.0,
  "planner_entry_zone_atr_frac": 0.08,
  "planner_vwap_reclaim_min_bars_above": 3,
  "risk_per_trade_rupees": 500.0,
  "fees_slippage_bps": 5.0,
  "enable_lunch_pause": true,
  "lunch_start": "12:15",
  "lunch_end": "13:15",
  "setups": {
    "breakout_long": {
      "enabled": true
    },
    "breakout_short": {
      "enabled": true
    },
    "vwap_reclaim_long": {
      "enabled": true,
      "min_distance_bps": 50,
      "max_distance_bps": 300,
      "require_oversold_rsi": false,
      "oversold_rsi_threshold": 30,
      "overbought_rsi_threshold": 70,
      "min_bars_above_vwap": 3,
      "reclaim_volume_confirmation": true,
      "min_volume_mult": 1.3,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "vwap_buffer_mult": 0.15,
      "target_mult_t1": 1.2,
      "target_mult_t2": 2.0,
      "confidence_strong_signal": 0.85,
      "confidence_weak_signal": 0.65
    },
    "vwap_lose_short": {
      "enabled": true,
      "min_distance_bps": 50,
      "max_distance_bps": 300,
      "require_oversold_rsi": false,
      "oversold_rsi_threshold": 30,
      "overbought_rsi_threshold": 70,
      "min_bars_above_vwap": 2,
      "reclaim_volume_confirmation": true,
      "min_volume_mult": 1.3,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "vwap_buffer_mult": 0.15,
      "target_mult_t1": 1.2,
      "target_mult_t2": 2.0,
      "confidence_strong_signal": 0.8,
      "confidence_weak_signal": 0.6
    },
    "gap_fill_long": {
      "enabled": false,
      "_comment": "Quick Win: Disabled per Audit Task 4 - 12 signals, 0 executions (waste of compute)",
      "min_gap_pct": 0.3,
      "max_gap_pct": 2.5,
      "require_volume_confirmation": true,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "gap_fill_short": {
      "enabled": false,
      "_comment": "Quick Win: Disabled per Audit Task 4 - 12 signals, 0 executions (waste of compute)",
      "min_gap_pct": 0.3,
      "max_gap_pct": 2.5,
      "require_volume_confirmation": true,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "trend_pullback_long": {
      "enabled": true,
      "min_pullback_pct": 1.0,
      "max_pullback_pct": 5.0,
      "trend_confirmation_bars": 10,
      "min_trend_bars": 10,
      "pullback_depth_pct": 38.2,
      "min_trend_strength": 1.5,
      "min_momentum_score": 0.5,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.3,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_strong_trend": 0.8,
      "confidence_weak_trend": 0.65
    },
    "trend_pullback_short": {
      "enabled": true,
      "min_pullback_pct": 1.0,
      "max_pullback_pct": 5.0,
      "trend_confirmation_bars": 10,
      "min_trend_bars": 10,
      "pullback_depth_pct": 38.2,
      "min_trend_strength": 1.5,
      "min_momentum_score": 0.5,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.3,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_strong_trend": 0.8,
      "confidence_weak_trend": 0.65
    },
    "trend_continuation_long": {
      "enabled": true,
      "min_trend_strength": 1.2,
      "min_trend_bars": 8,
      "min_pullback_pct": 0.5,
      "max_pullback_pct": 2.0,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.3,
      "min_momentum_score": 0.6,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_strong_trend": 0.85,
      "confidence_weak_trend": 0.7
    },
    "trend_continuation_short": {
      "enabled": true,
      "min_trend_strength": 1.2,
      "min_trend_bars": 8,
      "min_pullback_pct": 0.5,
      "max_pullback_pct": 2.0,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.3,
      "min_momentum_score": 0.6,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_strong_trend": 0.85,
      "confidence_weak_trend": 0.7
    },
    "volume_spike_reversal_long": {
      "enabled": true,
      "min_volume_spike_mult": 3.0,
      "min_body_size_pct": 1.0,
      "reversal_threshold_pct": 2.0,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "volume_spike_reversal_short": {
      "enabled": true,
      "min_volume_spike_mult": 3.0,
      "min_body_size_pct": 1.0,
      "reversal_threshold_pct": 2.0,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "volume_breakout_long": {
      "enabled": false,
      "min_volume_spike_mult": 2.5,
      "min_breakout_pct": 0.5,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_level": 0.75
    },
    "volume_breakout_short": {
      "enabled": false,
      "min_volume_spike_mult": 2.5,
      "min_breakout_pct": 0.5,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_level": 0.75
    },
    "gap_breakout_long": {
      "enabled": false,
      "min_gap_pct": 0.3,
      "max_gap_pct": 2.5,
      "require_volume_confirmation": true,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_level": 0.75
    },
    "gap_breakout_short": {
      "enabled": false,
      "min_gap_pct": 0.3,
      "max_gap_pct": 2.5,
      "require_volume_confirmation": true,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_level": 0.75
    },
    "range_bounce_long": {
      "enabled": true,
      "min_range_duration": 20,
      "max_range_height_pct": 3.0,
      "min_range_height_pct": 0.5,
      "bounce_tolerance_pct": 0.2,
      "breakout_confirmation_pct": 0.3,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "range_bounce_short": {
      "enabled": true,
      "min_range_duration": 20,
      "max_range_height_pct": 3.0,
      "min_range_height_pct": 0.5,
      "bounce_tolerance_pct": 0.2,
      "breakout_confirmation_pct": 0.3,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "range_breakout_long": {
      "enabled": false,
      "min_range_duration": 20,
      "max_range_height_pct": 3.0,
      "min_range_height_pct": 0.5,
      "breakout_confirmation_pct": 0.3,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "range_breakdown_short": {
      "enabled": false,
      "min_range_duration": 20,
      "max_range_height_pct": 3.0,
      "min_range_height_pct": 0.5,
      "breakout_confirmation_pct": 0.3,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "level_breakout_long": {
      "enabled": true,
      "k_atr": 0.25,
      "min_breakout_atr_mult": 0.3,
      "hold_bars": 1,
      "vol_z_required": 1.5,
      "require_breakout_bar_volume_surge": true,
      "breakout_volume_min_ratio": 1.4,
      "enable_smc_filtering": true,
      "liquidity_grab_tolerance_pct": 0.2,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_strong_breakout": 0.85,
      "confidence_weak_breakout": 0.65
    },
    "level_breakout_short": {
      "enabled": true,
      "k_atr": 0.25,
      "min_breakout_atr_mult": 0.3,
      "hold_bars": 1,
      "vol_z_required": 1.5,
      "require_breakout_bar_volume_surge": true,
      "breakout_volume_min_ratio": 1.4,
      "enable_smc_filtering": true,
      "liquidity_grab_tolerance_pct": 0.2,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_strong_breakout": 0.85,
      "confidence_weak_breakout": 0.65
    },
    "failure_fade_long": {
      "enabled": true,
      "min_pierce_size_pct": 0.1,
      "max_pierce_size_pct": 1.0,
      "fade_confirmation_bars": 1,
      "require_volume_confirmation": false,
      "min_volume_mult": 1.2,
      "min_fade_strength": 0.3,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "stop_mult": 1.5,
      "confidence_strong_fade": 0.8,
      "confidence_weak_fade": 0.6
    },
    "failure_fade_short": {
      "enabled": true,
      "min_pierce_size_pct": 0.1,
      "max_pierce_size_pct": 1.0,
      "fade_confirmation_bars": 1,
      "require_volume_confirmation": false,
      "min_volume_mult": 1.2,
      "min_fade_strength": 0.3,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "stop_mult": 1.5,
      "confidence_strong_fade": 0.8,
      "confidence_weak_fade": 0.6
    },
    "squeeze_release_long": {
      "enabled": true,
      "width_window": 40,
      "expansion_ratio": 1.5,
      "width_calculation_period": 20,
      "recent_width_bars": 5,
      "momentum_period": 3,
      "min_momentum_threshold": 0.001,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "stop_mult": 1.0,
      "confidence_strong_expansion": 0.8,
      "confidence_weak_expansion": 0.6
    },
    "squeeze_release_short": {
      "enabled": true,
      "width_window": 40,
      "expansion_ratio": 1.5,
      "width_calculation_period": 20,
      "recent_width_bars": 5,
      "momentum_period": 3,
      "min_momentum_threshold": 0.001,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "stop_mult": 1.0,
      "confidence_strong_expansion": 0.8,
      "confidence_weak_expansion": 0.6
    },
    "flag_continuation_long": {
      "enabled": true,
      "min_consolidation_bars": 3,
      "max_consolidation_bars": 12,
      "min_trend_strength": 1.5,
      "trend_lookback_period": 10,
      "max_consolidation_range_pct": 2.0,
      "breakout_confirmation_pct": 0.1,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "stop_mult": 1.0,
      "confidence_strong_flag": 0.85,
      "confidence_weak_flag": 0.65
    },
    "flag_continuation_short": {
      "enabled": true,
      "min_consolidation_bars": 3,
      "max_consolidation_bars": 12,
      "min_trend_strength": 1.5,
      "trend_lookback_period": 10,
      "max_consolidation_range_pct": 2.0,
      "breakout_confirmation_pct": 0.1,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "stop_mult": 1.0,
      "confidence_strong_flag": 0.85,
      "confidence_weak_flag": 0.65
    },
    "momentum_breakout_long": {
      "enabled": true,
      "min_momentum_3bar_pct": 1.5,
      "min_momentum_1bar_pct": 0.5,
      "min_momentum_2bar_pct": 1.0,
      "min_trend_5bar_pct": 2.0,
      "min_trend_3bar_pct": 1.0,
      "min_positive_bars": 2,
      "vol_z_breakout_mult": 0.8,
      "vol_z_continuation_mult": 0.6,
      "min_volume_surge_ratio": 1.3,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "stop_mult": 1.5,
      "confidence_strong_momentum": 0.8,
      "confidence_weak_momentum": 0.6
    },
    "momentum_breakout_short": {
      "enabled": true,
      "min_momentum_3bar_pct": 1.5,
      "min_momentum_1bar_pct": 0.5,
      "min_momentum_2bar_pct": 1.0,
      "min_trend_5bar_pct": 2.0,
      "min_trend_3bar_pct": 1.0,
      "min_positive_bars": 2,
      "vol_z_breakout_mult": 0.8,
      "vol_z_continuation_mult": 0.6,
      "min_volume_surge_ratio": 1.3,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "stop_mult": 1.5,
      "confidence_strong_momentum": 0.8,
      "confidence_weak_momentum": 0.6
    },
    "support_bounce_long": {
      "enabled": true,
      "min_touches": 2,
      "bounce_tolerance_pct": 0.3,
      "require_volume_spike": true,
      "min_volume_mult": 1.5,
      "min_level_age_bars": 5,
      "max_level_distance_pct": 2.0,
      "level_merge_tolerance_pct": 0.3,
      "breakout_buffer_pct": 0.2,
      "min_breakout_volume_mult": 1.8,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "level_buffer_mult": 0.1,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_strong_level": 0.85,
      "confidence_weak_level": 0.65,
      "confidence_breakout": 0.8,
      "confidence_bounce": 0.75
    },
    "resistance_bounce_short": {
      "enabled": true,
      "min_touches": 2,
      "bounce_tolerance_pct": 0.3,
      "require_volume_spike": true,
      "min_volume_mult": 1.5,
      "min_level_age_bars": 5,
      "max_level_distance_pct": 2.0,
      "level_merge_tolerance_pct": 0.3,
      "breakout_buffer_pct": 0.2,
      "min_breakout_volume_mult": 1.8,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "level_buffer_mult": 0.1,
      "target_mult_t1": 1.5,
      "target_mult_t2": 2.5,
      "confidence_strong_level": 0.85,
      "confidence_weak_level": 0.65,
      "confidence_breakout": 0.8,
      "confidence_bounce": 0.75
    },
    "support_breakdown_short": {
      "enabled": true,
      "min_touches": 2,
      "bounce_tolerance_pct": 0.3,
      "require_volume_spike": true,
      "min_volume_mult": 1.5,
      "min_level_age_bars": 5,
      "max_level_distance_pct": 2.0,
      "level_merge_tolerance_pct": 0.3,
      "breakout_buffer_pct": 0.25,
      "min_breakout_volume_mult": 2.0,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "level_buffer_mult": 0.15,
      "target_mult_t1": 2.0,
      "target_mult_t2": 3.0,
      "confidence_strong_level": 0.85,
      "confidence_weak_level": 0.65,
      "confidence_breakout": 0.85,
      "confidence_bounce": 0.75
    },
    "resistance_breakout_long": {
      "enabled": true,
      "min_touches": 2,
      "bounce_tolerance_pct": 0.3,
      "require_volume_spike": true,
      "min_volume_mult": 1.5,
      "min_level_age_bars": 5,
      "max_level_distance_pct": 2.0,
      "level_merge_tolerance_pct": 0.3,
      "breakout_buffer_pct": 0.25,
      "min_breakout_volume_mult": 2.0,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "level_buffer_mult": 0.15,
      "target_mult_t1": 2.0,
      "target_mult_t2": 3.0,
      "confidence_strong_level": 0.85,
      "confidence_weak_level": 0.65,
      "confidence_breakout": 0.85,
      "confidence_bounce": 0.75
    },
    "orb_breakout_long": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "orb_breakout_short": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "orb_breakdown_short": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "orb_breakout": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "orb_breakdown": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "orb_pullback_long": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "orb_pullback_short": {
      "enabled": true,
      "orb_minutes": 15,
      "min_range_pct": 0.5,
      "breakout_volume_mult": 1.5,
      "breakout_buffer_pct": 0.5,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_volume_confirmed": 0.8,
      "confidence_no_volume": 0.6,
      "or_level_buffer_mult": 0.1,
      "pullback_zones": {
        "shallow": 0.25,
        "medium": 0.50,
        "deep": 0.75
      }
    },
    "vwap_mean_reversion_long": {
      "enabled": true,
      "min_distance_bps": 150,
      "max_distance_bps": 400,
      "require_oversold_rsi": true,
      "oversold_rsi_threshold": 30,
      "overbought_rsi_threshold": 70,
      "min_bars_above_vwap": 2,
      "reclaim_volume_confirmation": true,
      "min_volume_mult": 1.2,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "vwap_buffer_mult": 0.2,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_strong_signal": 0.8,
      "confidence_weak_signal": 0.6
    },
    "vwap_mean_reversion_short": {
      "enabled": true,
      "min_distance_bps": 150,
      "max_distance_bps": 400,
      "require_oversold_rsi": true,
      "overbought_rsi_threshold": 70,
      "oversold_rsi_threshold": 30,
      "min_bars_above_vwap": 2,
      "reclaim_volume_confirmation": true,
      "min_volume_mult": 1.2,
      "min_stop_distance_pct": 0.5,
      "stop_distance_mult": 0.75,
      "vwap_buffer_mult": 0.2,
      "target_mult_t1": 1.0,
      "target_mult_t2": 1.5,
      "confidence_strong_signal": 0.8,
      "confidence_weak_signal": 0.6
    },
    "range_rejection_long": {
      "enabled": true,
      "min_range_duration": 5,
      "max_range_height_pct": 3.0,
      "min_range_height_pct": 0.5,
      "bounce_tolerance_pct": 0.2,
      "breakout_confirmation_pct": 0.3,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "range_rejection_short": {
      "enabled": true,
      "min_range_duration": 5,
      "max_range_height_pct": 3.0,
      "min_range_height_pct": 0.5,
      "bounce_tolerance_pct": 0.2,
      "breakout_confirmation_pct": 0.3,
      "require_volume_confirmation": true,
      "min_volume_mult": 1.5,
      "target_mult_t1": 1.0,
      "target_mult_t2": 2.0,
      "confidence_level": 0.7
    },
    "ict_comprehensive": {
      "enabled": true,
      "order_block_min_move_pct": 0.5,
      "order_block_min_volume_surge": 1.5,
      "order_block_lookback": 20,
      "order_block_test_tolerance_pct": 0.15,
      "fvg_min_gap_pct": 0.1,
      "fvg_max_gap_pct": 1.5,
      "fvg_require_volume_spike": true,
      "fvg_min_volume_mult": 1.5,
      "fvg_fill_tolerance_pct": 0.05,
      "sweep_min_distance_pct": 0.05,
      "sweep_max_distance_pct": 0.3,
      "sweep_min_volume_surge": 2.0,
      "sweep_min_wick_ratio": 0.4,
      "sweep_reversal_bars": 3,
      "premium_threshold_pct": 70.0,
      "discount_threshold_pct": 30.0,
      "range_lookback_bars": 50,
      "bos_min_structure_bars": 10,
      "bos_min_break_pct": 0.2,
      "bos_volume_confirmation": true,
      "choch_momentum_periods": [3, 5, 8],
      "choch_min_momentum_change_pct": 1.0,
      "choch_volume_threshold": 1.8,
      "risk_pct": 1.0,
      "reward_risk_ratio": 2.0,
      "max_bars_hold": 12
    },
    "main_detector": {
      "enabled": true,
      "max_detections_per_symbol": 5,
      "conflict_resolution_enabled": true,
      "priority_weights": {
        "ict": 1.0,
        "level_breakout_long": 0.9,
        "level_breakout_short": 0.9,
        "failure_fade_long": 0.8,
        "failure_fade_short": 0.8,
        "squeeze_release_long": 0.7,
        "squeeze_release_short": 0.7,
        "flag_continuation_long": 0.6,
        "flag_continuation_short": 0.6,
        "momentum_breakout_long": 0.5,
        "momentum_breakout_short": 0.5
      }
    }
  },
  "filters": {
    "adx": {
      "lookback": 14,
      "min": 30.0,
      "max": 45.0
    },
    "rsi14": {
      "min": 35.0,
      "max": 65.0,
      "short_min": 35.0,
      "short_max": 70.0
    },
    "regime": {
      "allow": [
        "trend_up",
        "trend_down",
        "chop"
      ],
      "disallow": [
        "squeeze"
      ]
    },
    "market_sentiment_filters": {
      "bullish_market_long_bias": 1.3,
      "bearish_market_short_bias": 1.3,
      "fear_mean_reversion_bias": 1.4,
      "greed_momentum_bias": 1.2,
      "sector_strength_bonus": 0.15,
      "sector_weakness_penalty": -0.10
    }
  },
  "time_policy": {
    "start_trade": "10:15",
    "lunch_block_start": "12:00",
    "lunch_block_end": "12:45",
    "last_entry_cutoff": "14:45"
  },
  "structure": {
    "max_structural_risk_pct_of_price": 0.003,
    "prefer_levels": [
      "ORL",
      "PDL"
    ],
    "weaken_levels": [
      "VWAP",
      "ORH"
    ]
  },
  "ranking": {
    "min_rank": 0.62,
    "boosts": {
      "trend_aligned": 0.08,
      "level_strength": 0.06,
      "rvwap_confluence": 0.04
    },
    "penalties": {
      "midday": -0.05,
      "high_adx_exhaustion": -0.04,
      "rsi_edge": -0.06
    }
  },
  "news_gate": {
    "window_bars": 30,
    "vol_z_thresh": 5.0,
    "ret_z_thresh": 2.5,
    "body_atr_ratio_thresh": 2.0,
    "require_retest_bars": 2,
    "reduce_size_mult": 0.5
  },
  "t1_rr": 1.50,
  "t2_rr": 3.00,
  "sl_atr_mult": 1.60,
  "sl_below_swing_ticks": 0.0,
  "trail_to": "none",
  "exit_t1_book_pct": 50.0,
  "exit_t1_move_sl_to_be": true,
  "exit_time_stop_min": 30.0,
  "exit_time_stop_req_rr": 0.40,
  "exit_score_drop_enabled": true,
  "exit_score_drop_bpct": 30.0,
  "breakout_short_risk_control": true,
  "eod_scale_out": true,
  "entry_cutoff_hhmm": "14:45",
  "eod_squareoff_hhmm": "15:12",
  "screener_store_5m_max": 120,
  "max_per_cycle": 100,
  "producer_min_interval_sec": 5,
  "rank_exec_threshold": 1.0,
  "rank_pctl_min": 0.60,
  "max_concurrent_positions": 30,
  "time_restricted_trading": true,
  "_comment_execution": "=== EXECUTION SETTINGS ===",
  "exec_order_mode": "MARKET",
  "exec_product": "MIS",
  "exec_variety": "regular",
  "_comment_metrics": "=== METRICS & BAR PROCESSING ===",
  "metrics_min_bars_5m": 20,
  "metrics_rsi_len": 14,
  "metrics_adx_len": 14,
  "metrics_slope_window": 3,
  "metrics_drop_last_forming": true,
  "metrics_enable_vwap": false,
  "_comment_energy_scanner": "=== ENERGY SCANNER (STAGE-0) ===",
  "energy_scanner": {
    "top_k_long": 80,
    "top_k_short": 80,
    "top_k_mr": 20
  },
  "_comment_scanner_filters": "=== SCANNER FILTERS ===",
  "scanner_min_bar5_volume": 1000,
  "scanner_vwap_bps_caps": {
    "early": 120,
    "mid": 140,
    "late": 200
  },
  "scanner_ret1_max": 0.035,
  "scanner_vol_persist_bars": 2,
  "scanner_vol_ratio_min": 1.0,
  "_comment_dedupe": "=== DE-DUPLICATION ===",
  "dedupe_cooloff_bars": 3,
  "dedupe_require_setup_change": true,
  "_comment_websocket": "=== WEBSOCKET SETTINGS ===",
  "ws_batch_size": 100,
  "ws_flush_enabled": true,
  "_comment_ranker": "=== RANKER CONFIGURATION ===",
  "rank_vol_ratio_divisor": 2.0,
  "rank_vol_cap": 3.0,
  "rank_rsi_mid": 50.0,
  "rank_rsi_divisor": 30.0,
  "rank_rsi_floor": -0.5,
  "rank_rsi_slope_cap": 0.3,
  "rank_adx_mid": 25.0,
  "rank_adx_divisor": 20.0,
  "rank_adx_floor": -0.3,
  "rank_adx_slope_cap": 0.2,
  "rank_vwap_bonus": 0.3,
  "rank_vwap_penalty": -0.2,
  "rank_dist_near_bpct": 0.5,
  "rank_dist_ok_bpct": 1.5,
  "rank_dist_near_score": 0.4,
  "rank_dist_ok_score": 0.2,
  "rank_dist_far_score": -0.1,
  "rank_sq_score_le_50": 0.3,
  "rank_sq_score_le_70": 0.2,
  "rank_sq_score_ge_90": -0.2,
  "rank_acceptance_bonus": 0.3,
  "rank_weight_daily": 0.3,
  "rank_weight_intraday": 0.7,
  "rank_top_n": 50,
  "quality_filters": {
    "enabled": true,
    "min_structural_rr": 1.2,
    "min_t1_rr": 1.2,
    "breakout_min_adx": 20.0,
    "min_t2_rr": 1.5,
    "time_windows": {
      "morning_start": "09:25",
      "morning_end": "12:40",
      "afternoon_start": "13:20",
      "afternoon_end": "14:45"
    },
    "pattern_filters_enabled": true,
    "momentum_consolidation_enabled": true,
    "momentum_consolidation_threshold": 1.0,
    "momentum_consolidation_thresholds": {
      "breakout": 6.0,
      "pullback": 2.5,
      "vwap": 2.0,
      "fade": 1.8,
      "default": 1.0
    },
    "blacklist_setups": [
      "range_rejection_long",
      "support_bounce_long",
      "vwap_lose_short",
      "pdl_break_hold_short"
    ],
    "max_structural_rr": 4.0,
    "high_rr_penalty": -0.3,
    "chop_throttle": {
      "enabled": true,
      "allowed_setups": [
        "orb_pullback_long",
        "failure_fade_long",
        "range_break_retest_short",
        "vwap_reclaim_long",
        "gap_fill_short"
      ]
    },
    "outcome_aware_ranking": {
      "enabled": true,
      "blacklist_penalty": -999.0,
      "unrealistic_rr_penalty": -0.3
    },
    "strategy_momentum_filters": {
      "mean_reversion": {
        "strategies": [
          "failure_fade_long", "failure_fade_short",
          "vwap_mean_reversion_long", "vwap_mean_reversion_short",
          "volume_spike_reversal_long", "volume_spike_reversal_short"
        ],
        "momentum_consolidation_threshold": 0.7
      },
      "range_level_trades": {
        "strategies": [
          "support_bounce_long", "resistance_bounce_short",
          "vwap_reclaim_long", "vwap_lose_short",
          "range_rejection_long", "range_rejection_short"
        ],
        "momentum_consolidation_threshold": 2.5
      },
      "gap_trades": {
        "strategies": ["gap_fill_long", "gap_fill_short"],
        "momentum_consolidation_threshold": 3.0
      }
    },
    "range_compression_enabled": true,
    "range_compression_threshold": 0.8
  },
  "logging": {
    "enable_enhanced_logging": true,
    "enable_performance_tracking": true,
    "enable_analytics_stream": true,
    "enable_trade_lifecycle": true,
    "performance_update_frequency": "realtime"
  },

  "trigger_system": {
    "enabled": true,
    "expiry_minutes": 45,
    "cancel_existing_pending": true,
    "staleness_seconds": 1800,
    "max_pending_per_symbol": 2,
    "validation_frequency_seconds": 5
  },
  "trigger_conditions": {
    "volume_ratio_min": 1.2,
    "volume_persistence_bars": 2,
    "rsi_range_min": 35,
    "rsi_range_max": 65,
    "adx_min_strength": 15,
    "adx_min_trend": 20
  },
  "trigger_levels": {
    "tolerance_pct_default": 0.1,
    "vwap_minor_dip_pct": 0.05,
    "break_tolerance_pct": 0.05,
    "retest_tolerance_pct": 0.15,
    "pullback_tolerance_pct": 0.15
  },
  "trigger_patterns": {
    "consecutive_requirement_default": 2,
    "pullback_min_bars": 2,
    "break_hold_bars": 2,
    "vwap_reclaim_bars": 3,
    "rejection_confirmation_bars": 1
  },
  "trigger_monitoring": {
    "log_status_interval_seconds": 30,
    "detailed_logging": true,
    "performance_tracking": true
  },
  "_enhanced_strategy_mappings": {
    "_comment": "These map your planner strategies to trigger types",
    "orb_pullback_long": {
      "trigger_type": "pullback_to_level",
      "primary_level": "ORH",
      "confirmation_required": [
        "vwap_above",
        "volume_confirmation"
      ],
      "hold_bars": 2
    },
    "pdh_break_hold_long": {
      "trigger_type": "break_and_hold",
      "primary_level": "PDH",
      "break_confirmation": true,
      "allow_retest": true,
      "hold_bars": 2
    },
    "pdl_break_hold_short": {
      "trigger_type": "break_and_hold",
      "primary_level": "PDL",
      "direction": "short",
      "rejection_retest": true,
      "hold_bars": 2
    },
    "range_break_retest_short": {
      "trigger_type": "break_retest_fail",
      "primary_level": "ORL",
      "pattern": "failed_retest",
      "volume_decline_on_retest": true
    }
  },
  "_logging_enhancements": {
    "_comment": "Enhanced logging for trigger system",
    "trigger_events": {
      "log_pending_added": true,
      "log_condition_checks": false,
      "log_trigger_fired": true,
      "log_execution": true,
      "log_expiry": true
    }
  },
  "market_sentiment": {
    "enabled": true,
    "nifty_momentum": {
      "bullish_threshold": 0.3,
      "bearish_threshold": -0.3,
      "lookback_bars": 10,
      "weight_factor": 1.5
    },
    "banknifty_momentum": {
      "bullish_threshold": 0.4,
      "bearish_threshold": -0.4,
      "lookback_bars": 10,
      "weight_factor": 1.3
    },
    "breadth_indicators": {
      "advance_decline_ratio_bullish": 1.2,
      "advance_decline_ratio_bearish": 0.8,
      "new_highs_lows_ratio_bullish": 1.5,
      "new_highs_lows_ratio_bearish": 0.7
    },
    "vix_sentiment": {
      "fear_threshold": 20.0,
      "greed_threshold": 12.0,
      "extreme_fear_threshold": 30.0,
      "extreme_greed_threshold": 10.0
    },
    "sector_strength": {
      "enabled": true,
      "min_relative_strength": 1.05,
      "top_sectors_count": 5,
      "lookback_days": 5
    },
    "sentiment_bias": {
      "bullish_bias_multiplier": 1.2,
      "bearish_bias_multiplier": 1.2,
      "neutral_multiplier": 1.0,
      "contrarian_mode_enabled": true,
      "extreme_sentiment_fade": true
    }
  },
  "use_enhanced_triggers": true,
  "trigger_expiry_minutes": 15,
  "cancel_existing_pending": true,
  "validation_cache_max_symbols": 100,
  "validation_cache_max_bars_per_symbol": 50,
  "validation_max_time_ms": 50,
  "trigger_default_consecutive_bars": 1,
  "trigger_vwap_tolerance_pct": 0.02,
  "trigger_level_tolerance_pct": 0.1,
  "trigger_volume_min_ratio": 1.2,
  "trigger_rsi_period": 14,
  "trigger_adx_period": 14,
  "trigger_ema_period": 9,
  "orb_pullback_tolerance_pct": 0.15,
  "orb_pullback_hold_bars": 2,
  "orb_pullback_max_minutes": 90,
  "orb_require_index_alignment": true,
  "vwap_reclaim_min_consecutive": 3,
  "vwap_reclaim_volume_confirmation": true,
  "vwap_volume_persistence_bars": 3,
  "vwap_min_resistance_distance_atr": 0.2,
  "require_higher_timeframe_alignment": true,
  "daily_trend_ema_period": 20,
  "pdh_break_tolerance_pct": 0.05,
  "pdh_hold_bars": 2,
  "pdl_break_tolerance_pct": 0.05,
  "range_break_retest_max_pct": 0.15,
  "momentum_min_ema_slope": 0.001,
  "rsi_bullish_min": 40,
  "rsi_bullish_max": 70,
  "rsi_bearish_min": 30,
  "rsi_bearish_max": 55,
  "adx_strength_min": 15,
  "adx_trend_min": 20,
  "volume_persistence_min_ratio": 1.3,
  "volume_persistence_bars": 2,
  "breakout_volume_min_ratio": 1.4,
  "require_breakout_bar_volume_surge": true,
  "rejection_min_body_pct": 0.6,
  "condition_state_cleanup_hours": 24,
  "cache_cleanup_interval_minutes": 60,
  "order_idle_ms": 250,
  "order_rate_limit": 1,
  "order_retry_max": 3,
  "acceptance": {
    "bars": 3,
    "retest_bpct": 2.5,
    "need_vwap_hold": false
  },
  "strategy_ranking_profiles": {
    "mean_reversion": {
      "strategies": [
        "failure_fade_long", "failure_fade_short",
        "vwap_mean_reversion_long", "vwap_mean_reversion_short",
        "volume_spike_reversal_long", "volume_spike_reversal_short"
      ],
      "rank_vol_ratio_divisor": 4.0,
      "rank_vol_cap": 2.0,
      "rank_adx_mid": 35.0,
      "rank_adx_divisor": 25.0,
      "rank_vwap_bonus": 0.2,
      "rank_vwap_penalty": -0.1,
      "rank_dist_near_score": 0.2,
      "rank_acceptance_bonus": 0.5,
      "base_threshold": 0.5
    },
    "momentum_breakout": {
      "strategies": [
        "breakout_long", "breakout_short",
        "orb_breakout_long", "orb_breakout_short",
        "flag_continuation_long", "flag_continuation_short",
        "trend_pullback_long", "trend_pullback_short"
      ],
      "rank_vol_ratio_divisor": 1.5,
      "rank_vol_cap": 4.0,
      "rank_adx_mid": 20.0,
      "rank_adx_divisor": 15.0,
      "rank_vwap_bonus": 0.4,
      "rank_vwap_penalty": -0.3,
      "rank_dist_near_score": 0.6,
      "rank_acceptance_bonus": 0.2,
      "base_threshold": 1.8
    },
    "range_bound": {
      "strategies": [
        "range_rejection_long", "range_rejection_short",
        "support_bounce_long", "resistance_bounce_short",
        "vwap_reclaim_long", "vwap_lose_short"
      ],
      "rank_vol_ratio_divisor": 3.0,
      "rank_vol_cap": 2.5,
      "rank_adx_mid": 30.0,
      "rank_adx_divisor": 20.0,
      "rank_sq_score_le_50": 0.5,
      "rank_sq_score_le_70": 0.3,
      "rank_acceptance_bonus": 0.4,
      "base_threshold": 1.0
    },
    "gap_fill": {
      "strategies": [
        "gap_fill_long", "gap_fill_short"
      ],
      "rank_vol_ratio_divisor": 2.5,
      "rank_vol_cap": 3.0,
      "rank_adx_mid": 25.0,
      "rank_adx_divisor": 20.0,
      "rank_vwap_bonus": 0.3,
      "rank_acceptance_bonus": 0.3,
      "base_threshold": 1.6
    },
    "squeeze_expansion": {
      "strategies": [
        "squeeze_release_long", "squeeze_release_short"
      ],
      "rank_vol_ratio_divisor": 1.8,
      "rank_vol_cap": 3.5,
      "rank_adx_mid": 22.0,
      "rank_sq_score_le_50": 0.6,
      "rank_acceptance_bonus": 0.4,
      "base_threshold": 1.7
    }
  },
  "planner_strategy_mapping": {
    "pdl_break_hold_short": "momentum_breakout",
    "generic_long_from_failure_fade_long": "mean_reversion",
    "generic_long_from_range_rejection_long": "range_bound",
    "generic_long_from_support_bounce_long": "range_bound"
  },
  "exits": {
    "score_drop_enabled": true,
    "score_drop_bpct": 30.0,
    "time_stop_min": 45.0,
    "time_stop_req_rr": 0.5,
    "breakout_short_risk_control": true,
    "breakout_short_initial_stop_mult": 0.7,
    "breakout_short_partial_rr": 0.6,
    "breakout_short_partial_pct": 50.0,
    "breakout_short_sl_to_neg": -0.1,
    "breakout_short_time_stop_min": 30.0,
    "breakout_short_time_stop_max": 45.0,
    "breakout_short_time_stop_rr": 0.4,
    "eod_scale_out": true,
    "eod_scale_out_time1": "15:00",
    "eod_scale_out_time2": "15:07",
    "eod_scale_out_rr1": 0.7,
    "eod_scale_out_rr2": 0.4,
    "eod_scale_out_pct1": 50.0
  },
  "structure_manager": {
    "enabled": true,
    "min_structure_score": 25.0,
    "max_structures_per_symbol": 3,
    "structure_priorities": {
      "orb": 10,
      "vwap": 20,
      "support_resistance": 30,
      "trend": 40,
      "volume": 50,
      "gap": 60,
      "range": 70,
      "order_block": 80,
      "liquidity": 90,
      "pattern": 100
    },
    "logging": {
      "log_all_detections": true,
      "log_rejection_reasons": true,
      "log_config_validation": true,
      "performance_tracking": true
    }
  },
  "min_entry_sl_distance_pct": 0.003,
  "min_entry_sl_distance_abs": 0.05
}
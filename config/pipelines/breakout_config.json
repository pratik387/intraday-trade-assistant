{
    "_comment": "BREAKOUT Pipeline Configuration - All values from configuration.json and pro Indian trading standards",
    "_category": "BREAKOUT",
    "_description": "Momentum breaks of key levels (ORB, flag continuation, squeeze release, etc.)",

    "setup_types": [
        "breakout_long", "breakout_short",
        "orb_breakout_long", "orb_breakout_short",
        "orb_breakdown_long", "orb_breakdown_short",
        "flag_continuation_long", "flag_continuation_short",
        "squeeze_release_long", "squeeze_release_short",
        "momentum_breakout_long", "momentum_breakout_short",
        "range_breakout_long", "range_breakout_short",
        "range_breakdown_long", "range_breakdown_short",
        "gap_breakout_long", "gap_breakout_short",
        "resistance_breakout_long", "resistance_breakout_short",
        "support_breakdown_long", "support_breakdown_short",
        "break_of_structure_long", "break_of_structure_short",
        "change_of_character_long", "change_of_character_short",
        "equilibrium_breakout_long", "equilibrium_breakout_short",
        "level_breakout_long", "level_breakout_short"
    ],

    "screening": {
        "time_windows": {
            "_comment": "From configuration.json time_policy - NSE trading hours",
            "morning_start": "09:15",
            "morning_end": "12:00",
            "lunch_block_start": "12:00",
            "lunch_block_end": "13:00",
            "afternoon_start": "13:00",
            "afternoon_end": "14:45",
            "last_entry_cutoff": "14:45",
            "opening_bell_start": "09:15",
            "opening_bell_end": "09:30"
        },
        "momentum_consolidation": {
            "enabled": true,
            "threshold_pct": 1.0,
            "vwap_deviation_threshold": 0.02,
            "volume_ratio_threshold": 1.5
        },
        "min_bars_required": 4
    },

    "quality": {
        "_comment": "From configuration.json - min_t1_rr: 1.2, t1_rr: 1.5",
        "min_structural_rr": 1.2,
        "volume_ratio_floor": 0.5,
        "quality_thresholds": {
            "excellent": {
                "min_structural_rr": 2.0,
                "min_volume_ratio": 1.5
            },
            "good": {
                "min_structural_rr": 1.5,
                "min_volume_ratio": 1.3
            },
            "fair": {
                "min_structural_rr": 1.2,
                "min_volume_ratio": 1.0
            }
        }
    },

    "gates": {
        "_comment": "From configuration.json - breakout_volume_surge_min: 1.5 (long), 2.0 (short), breakout_momentum_candle_min_ratio: 2.0 (long), 2.5 (short)",
        "volume_surge": {
            "long": {
                "min_ratio": 1.5,
                "lookback_bars": 20
            },
            "short": {
                "min_ratio": 2.0,
                "lookback_bars": 20
            }
        },
        "momentum_candle": {
            "long": {
                "min_ratio": 2.0
            },
            "short": {
                "min_ratio": 2.5
            }
        },
        "adx": {
            "_comment": "From configuration.json - breakout_min_adx: 20.0, adx_min_strength: 15, adx_min_trend: 20",
            "min_value": 20,
            "low_adx_threshold": 15,
            "low_adx_size_mult": 0.8
        },
        "regime_rules": {
            "chop": {
                "_comment": "REVERTED: size_mult 0.5â†’0.7 as 0.5 reduced position sizes too aggressively",
                "allowed": true,
                "size_mult": 0.7,
                "exception": "orb_before_10:30"
            },
            "trend_up": {
                "allowed": true,
                "size_mult": 1.0
            },
            "trend_down": {
                "allowed": true,
                "size_mult": 1.0
            },
            "squeeze": {
                "allowed": true,
                "size_mult": 0.9
            }
        }
    },

    "ranking": {
        "_comment": "ALL values from OLD filters.json rank_* settings to match baseline ranker.py _intraday_strength()",
        "weights": {
            "volume": {
                "_comment": "rank_vol_ratio_divisor=2.0, rank_vol_cap=3.0",
                "divisor": 2.0,
                "cap": 3.0
            },
            "rsi": {
                "_comment": "rank_rsi_mid=50, rank_rsi_divisor=30, rank_rsi_floor=-0.5",
                "mid": 50.0,
                "divisor": 30.0,
                "floor": -0.5
            },
            "rsi_slope": {
                "_comment": "rank_rsi_slope_cap=0.3",
                "cap": 0.3
            },
            "adx": {
                "_comment": "rank_adx_mid=25, rank_adx_divisor=20, rank_adx_floor=-0.3",
                "mid": 25.0,
                "divisor": 20.0,
                "floor": -0.3
            },
            "adx_slope": {
                "_comment": "rank_adx_slope_cap=0.2",
                "cap": 0.2
            },
            "vwap": {
                "_comment": "rank_vwap_bonus=0.3, rank_vwap_penalty=-0.2",
                "aligned_bonus": 0.3,
                "misaligned_penalty": -0.2
            },
            "distance": {
                "_comment": "rank_dist_near_bpct=0.5, rank_dist_near_score=0.4, rank_dist_ok_bpct=1.5, rank_dist_ok_score=0.2, rank_dist_far_score=-0.1",
                "near_bpct": 0.5,
                "near_score": 0.4,
                "ok_bpct": 1.5,
                "ok_score": 0.2,
                "far_score": -0.1
            },
            "squeeze": {
                "_comment": "rank_sq_score_le_50=0.3, rank_sq_score_le_70=0.2, rank_sq_score_ge_90=-0.2",
                "low_bonus": 0.3,
                "mid_bonus": 0.2,
                "high_penalty": -0.2
            },
            "acceptance": {
                "_comment": "rank_acceptance_bonus=0.5",
                "excellent_bonus": 0.5,
                "good_bonus": 0.25
            }
        },
        "regime_multipliers": {
            "_comment": "Default fallback multipliers",
            "trend_up": 1.1,
            "trend_down": 1.1,
            "chop": 0.7,
            "squeeze": 1.0
        },
        "strategy_regime_multipliers": {
            "_comment": "From baseline ranker.py _get_regime_multiplier() - Strategy-specific overrides",
            "breakout": {
                "_comment": "Breakout poor in chop per baseline report",
                "chop": 0.7,
                "trend_up": 1.1,
                "trend_down": 1.1,
                "squeeze": 0.9,
                "default": 0.9
            },
            "orb_breakout": {
                "chop": 0.7,
                "trend_up": 1.1,
                "trend_down": 1.1,
                "squeeze": 0.9,
                "default": 0.9
            },
            "orb_breakdown": {
                "chop": 0.7,
                "trend_up": 1.1,
                "trend_down": 1.1,
                "squeeze": 0.9,
                "default": 0.9
            },
            "momentum_breakout": {
                "_comment": "From baseline: trend=1.4, chop=1.3, other=1.2",
                "trend_up": 1.4,
                "trend_down": 1.4,
                "chop": 1.3,
                "squeeze": 1.2,
                "default": 1.2
            },
            "flag_continuation": {
                "trend_up": 1.4,
                "trend_down": 1.4,
                "chop": 1.1,
                "squeeze": 1.2,
                "default": 1.1
            },
            "squeeze_release": {
                "squeeze": 1.5,
                "chop": 1.3,
                "trend_up": 1.2,
                "trend_down": 1.2,
                "default": 1.1
            },
            "break_of_structure": {
                "_comment": "From baseline: 1.2 constant for structural shifts",
                "trend_up": 1.2,
                "trend_down": 1.2,
                "chop": 1.2,
                "squeeze": 1.2,
                "default": 1.2
            },
            "change_of_character": {
                "_comment": "From baseline: trend=1.4, chop=0.8",
                "trend_up": 1.4,
                "trend_down": 1.4,
                "chop": 0.8,
                "squeeze": 1.0,
                "default": 1.0
            }
        },
        "daily_trend_multipliers": {
            "aligned": 1.25,
            "counter": 0.75,
            "neutral": 1.0
        }
    },

    "entry": {
        "_comment": "From configuration.json planner_entry_zone_breakout_mult: 0.25, min_breakout_atr_mult: 0.3 - Aligned with baseline",
        "zone_mult_atr": 0.25,
        "min_breakout_atr_mult": 0.3,
        "mode": "immediate",
        "triggers": {
            "long": "breakout_above_level",
            "short": "breakdown_below_level"
        }
    },

    "targets": {
        "_comment": "From configuration.json - t1_rr: 1.5, t2_rr: 3.0, level_breakout target_mult_t1: 2.0, target_mult_t2: 3.0",
        "rr_ratios": {
            "t1": 1.5,
            "t2": 3.0,
            "t3": 4.0
        },
        "qty_splits": {
            "_comment": "60-40 split to match OLD config - T3 disabled (0%)",
            "t1": 0.60,
            "t2": 0.40,
            "t3": 0.0
        },
        "caps": {
            "_comment": "FIXED: max_pct was 1.0 (1%) - way too restrictive! Old config uses 100%. Targets need to reach 2-3R for positive expectancy.",
            "t1": {
                "measured_move_frac": 2.0,
                "max_pct": 100.0
            },
            "t2": {
                "measured_move_frac": 3.0,
                "max_pct": 100.0
            },
            "t3": {
                "measured_move_frac": 4.0,
                "max_pct": 100.0
            }
        },
        "trail": {
            "after_t1": {
                "move_sl_to": "entry",
                "offset_atr": 0.1
            },
            "after_t2": {
                "move_sl_to": "t1",
                "offset_atr": 0.0
            }
        }
    },

    "stop_loss": {
        "_comment": "From baseline configuration.json (commit 3ded63d) - sl_atr_mult: 2.0",
        "atr_multiplier": 2.0
    }
}
